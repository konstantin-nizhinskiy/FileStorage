/*
name: nks-file-storage
version: 1.0.0
author: Konstantin Nizhinskiy
date: 2016-12-04 16:12:41 

*/!function(a,b){"function"==typeof define&&define.amd?define(["jquery-form"],function(){return b()}):a.fileStorage=b()}(this,function(){var a=function(){if(this._host="",!this._host){for(var a,b=document.getElementsByTagName("script"),c=0;c<b.length;c++)b[c].src.indexOf("/FileStorage.min.js")!==-1&&(a=b[c]);if(a){var d=document.createElement("a");d.href=a.getAttribute("src"),this._host=d.origin}}this._host||(this._host=window.location.origin)};return a.prototype.deleteFileUrlById=function(a,b){b=b||{},$.ajax({method:"DELETE",url:this._host+"/delete/public/"+a,success:b.success,error:b.error})},a.prototype.getFileUrlById=function(a,b){return b&&b.w&&b.h?this._host+"/get/public/"+b.w+"x"+b.h+"/"+a:b&&b.w&&b.h?this._host+"/get/public/"+b.w+"x"+b.h+"/"+a:this._host+"/get/public/"+a},a.prototype.getFileUrlByIdPre=function(a){return this._host+"/get/public/pre/"+a},a.prototype.sendFile=function(a,b){a=a||{},b=b||{};var c,d,e=$("<form/>",{method:"post",enctype:"multipart/form-data"});c=b.multiple?$("<input/>",{name:"file[]",type:"file",multiple:"multiple"}):$("<input/>",{name:"file",type:"file"}),d={url:this._host+"/fileLoad",method:"POST",data:a,error:b.error,success:b.success},e.append(c),c.one("change",function(){e.ajaxForm(d),e.submit()}),c.click()},new a});